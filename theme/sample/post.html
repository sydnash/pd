
<!-- meta -->
{{define "meta"}}
<meta name="keywords" content="blog,zhoukk,zhoukk.com">
<meta name="description" content="zhoukk's blog">
{{end}}


<!-- title -->
{{define "title"}}
<title>{{.post.title}}</title>
{{end}}


<!-- style -->
{{define "style"}}

{{end}}


<!-- script -->
{{define "script"}}

<script>
	function list_comment() {
		$.get("/list_comment.ajax", {id:window.location.pathname}, function(data, status) {
			if (data != null) {
				$("#comment_list").html("")
				$.each(data, function(i, comment) {
					var list = '<li class="list-group-item"><h4 class="list-group-item-heading"><a href="'+
					comment.url+'">'+comment.nickname+'</a></h4><p class="list-group-item-text">'+comment.content+'</p></li>'
					$("#comment_list").append(list)
				})
				$("#cnt_comment").text(data.length)
			}
		})
	}
	$().ready(function () {
		list_comment()
	})
	$('#btn_comment').on('click', function () {
		$.post("/new_comment.ajax", {
			id:window.location.pathname,
			nickname:$("#nickname").val(),
			url:$("#url").val(),
			content:$("#content").val()
		}, function(data, status) {
			list_comment()
		})
	})
</script>

{{end}}

<!-- body -->
{{define "body"}}
{{template "layout_8_4.html" .}}
{{end}}

<!-- content -->
{{define "content"}}
<div class="panel panel-default">
	<div class="panel-heading">
		<h3>
			<strong>{{.post.title}}</strong>
		</h3>
	</div>
	<div class="panel-body">
		{{.post.content}}
	</div>
	<div class="panel-footer text-right">
		<span class="label label-default">{{.post.category}}</span>
		<span class="glyphicon glyphicon-time" aria-hidden="true"></span>
		<time datetime="{{.post.sdate}}">{{.post.sdate}}</time>
		<a data-toggle="collapse" href="#comments" aria-expanded="false" aria-controls="comments">留言</a>
		<span class="badge" id="cnt_comment">0</span>
	</div>
	<div class="panel-collapse collapse in" id="comments">
		<div class="panel-body">
			<!-- comment list -->
			<ul id="comment_list" class="list-group">

			</ul>

			<!-- comment form -->
			<form class="form-horizontal">
				<div class="form-group">
					<label for="nickname" class="col-sm-2 control-label">昵称</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" id="nickname">
					</div>
				</div>
				<div class="form-group">
					<label for="url" class="col-sm-2 control-label">链接</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" id="url">
					</div>
				</div>
				<div class="form-group">
					<label for="content" class="col-sm-2 control-label">内容</label>
					<div class="col-sm-10">
						<textarea class="form-control" id="content" rows="6"></textarea>
					</div>
				</div>
				<div class="form-group">
					<div class="col-sm-offset-2 col-sm-10">
						<button type="button" id="btn_comment" class="btn btn-default">留言</button>
					</div>
				</div>
			</form>
		</div>

	</div>
</div>

<ul class="pager">
	{{if .post.previous_url}}
	<li class="previous">
		<a href="{{.post.previous_url}}" title="{{.post.previous_title}}">&larr; 上一篇</a>
	</li>
	{{else}}
	<li class="previous disabled">
		<a>&larr; 上一篇</a>
	</li>
	{{end}}
	{{if .post.next_url}}
	<li class="next">
		<a href="{{.post.next_url}}" title="{{.post.next_title}}">下一篇 &rarr;</a>
	</li>
	{{else}}
	<li class="next disabled">
		<a>下一篇 &rarr;</a>
	</li>
	{{end}}
</ul>
{{end}}



<!-- aside -->
{{define "aside"}}
{{template "side.html" .}}
{{end}}
